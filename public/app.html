<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>purokusiiiii-V4</title>
    <style>
        body { margin: 0; background: #020617; color: #f8fafc; font-family: sans-serif; display: flex; align-items: center; justify-content: center; height: 100vh; }
        .card { background: #1e293b; padding: 2.5rem; border-radius: 2rem; width: 90%; max-width: 450px; text-align: center; border: 1px solid #334155; box-shadow: 0 20px 50px rgba(0,0,0,0.5); }
        h1 { font-size: 2.5rem; margin-bottom: 2rem; background: linear-gradient(135deg, #38bdf8, #818cf8); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 900; }
        .input-stack { display: flex; flex-direction: column; gap: 1rem; }
        input, select { background: #0f172a; border: 2px solid #334155; border-radius: 1rem; padding: 1.2rem; color: white; font-size: 1.1rem; outline: none; }
        button { background: #38bdf8; color: #020617; border: none; padding: 1.2rem; border-radius: 1rem; font-weight: 800; font-size: 1.2rem; cursor: pointer; transition: 0.2s; }
        button:active { transform: scale(0.95); }
    </style>
    <script>
        if (localStorage.getItem('purokusiiiii_unlocked') !== 'true') window.location.replace('/');
    </script>
</head>
<body>
    <div class="card">
        <h1>purokusiiiii</h1>
        <div class="input-stack">
            <input type="text" id="target-url" placeholder="URLを入力" spellcheck="false" autocomplete="off">
            <select id="mode-select">
                <option value="stealth">ステルスモード (DIP)</option>
                <option value="bare">ベアモード (高速)</option>
            </select>
            <button type="button" id="launch-btn">閲覧開始</button>
        </div>
    </div>
    <script src="/config.js"></script>
    <script>
        const btn = document.getElementById('launch-btn');
        const input = document.getElementById('target-url');
        btn.onclick = () => {
            let url = input.value.trim();
            if (!url) return;
            if (!url.startsWith('http')) url = 'https://' + url;
            window.location.href = `/api/bare?url=${window.__DIP_CONFIG__.encodeUrl(url)}&mode=${document.getElementById('mode-select').value}`;
        };
        input.onkeydown = (e) => { if(e.key==='Enter'){ e.preventDefault(); btn.click(); } };
    </script>
</body>
</html>
