<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stealth Portal</title>
    <style>
        body { background: #000; color: #0f0; font-family: monospace; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; margin: 0; }
        input { background: #111; border: 1px solid #0f0; color: #0f0; padding: 15px; width: 80%; max-width: 500px; font-size: 1.2rem; outline: none; }
        p { font-size: 0.8rem; color: #666; }
    </style>
</head>
<body>
    <h1>SECRET GATEWAY</h1>
    <form id="proxy-form">
        <input type="text" id="url-input" placeholder="URLを入力 (例: https://game8.jp)" autocomplete="off">
    </form>
    <p>i-Filter / Anti-Adblock Bypass Mode Active</p>

    <script src="https://cdn.jsdelivr.net/npm/@titaniumnetwork-dev/ultraviolet@latest/dist/uv.bundle.js"></script>
    <script src="uv.config.js"></script>
    <script>
        const form = document.getElementById('proxy-form');
        form.addEventListener('submit', async event => {
            event.preventDefault();
            const url = document.getElementById('url-input').value;
            
            // プロトコル補完
            const targetUrl = url.startsWith('http') ? url : 'https://' + url;

            // Service Workerの登録
            window.navigator.serviceWorker.register('./sw.js', {
                scope: __uv$config.prefix
            }).then(() => {
                location.href = __uv$config.prefix + __uv$config.encodeUrl(targetUrl);
            });
        });
    </script>
</body>
</html>
